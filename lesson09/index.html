<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô - Global Bar</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Prompt', sans-serif;
            background-color: #f4f4f4;
            padding-bottom: 70px; /* ‡πÄ‡∏ß‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ö‡∏±‡∏á‡∏ö‡∏≤‡∏£‡πå */
        }

        /* --- ‡∏™‡πà‡∏ß‡∏ô CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÄ‡∏î‡∏¥‡∏° (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á) --- */
        .main-content {
            padding: 20px;
            text-align: center;
        }
        
        /* --- CSS ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà (Bar & Modal) --- */

        /* 1. ‡πÅ‡∏ñ‡∏ö‡∏ö‡∏≤‡∏£‡πå‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á (Fixed Bottom Bar) */
        .fixed-bottom-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 60px;
            background-color: #2c3e50; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ö‡∏≤‡∏£‡πå */
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.2);
            z-index: 1000;
            box-sizing: border-box;
        }

        .bar-logo {
            font-size: 1.2rem;
            font-weight: bold;
        }

        /* ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏∏‡πà‡∏°‡∏£‡∏π‡∏õ */
        .random-btn {
            background-color: #e67e22; /* ‡∏™‡∏µ‡∏™‡πâ‡∏° */
            color: white;
            border: none;
            padding: 10px 25px;
            font-size: 1rem;
            font-family: 'Prompt', sans-serif;
            border-radius: 30px;
            cursor: pointer;
            transition: transform 0.2s, background-color 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .random-btn:hover {
            background-color: #d35400;
            transform: scale(1.05);
        }

        .random-btn:active {
            transform: scale(0.95);
        }

        /* 2. ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á Overlay (Modal) */
        .random-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.92); /* ‡∏û‡∏∑‡πâ‡∏ô‡∏î‡∏≥‡∏à‡∏≤‡∏á‡πÜ */
            z-index: 2000; /* ‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤‡∏ö‡∏≤‡∏£‡πå */
            display: none; /* ‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô */
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        /* ‡∏Å‡∏£‡∏≠‡∏ö‡πÉ‡∏™‡πà‡∏£‡∏π‡∏õ */
        .image-container {
            position: relative;
            width: 90%;
            max-width: 600px;
            height: auto;
            text-align: center;
        }

        .image-container img {
            width: 100%;
            height: auto;
            max-height: 80vh;
            object-fit: contain;
            border: 8px solid #fff;
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(255, 165, 0, 0.6); /* ‡πÄ‡∏á‡∏≤‡∏™‡∏µ‡∏™‡πâ‡∏°‡πÄ‡∏£‡∏∑‡∏≠‡∏á‡πÅ‡∏™‡∏á */
        }

        /* ‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏¥‡∏î X */
        .close-btn {
            position: absolute;
            top: 30px;
            right: 40px;
            background: none;
            border: none;
            color: white;
            font-size: 3rem;
            cursor: pointer;
            z-index: 2001;
            transition: color 0.3s;
        }

        .close-btn:hover {
            color: #ff4757;
        }

        /* ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£) */
        .status-text {
            color: white;
            margin-top: 20px;
            font-size: 1.5rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

    </style>
</head>
<body>

    <div class="main-content">
        <h1>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h1>
        <p>‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥</p>
        <p>‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡∏ó‡∏µ‡πà‡πÅ‡∏ñ‡∏ö‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á ‡∏à‡∏∞‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏∏‡πà‡∏°‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ï‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏™‡∏°‡∏≠</p>
        </div>


    <div class="fixed-bottom-bar">
        <div class="bar-logo">TAS School System</div>
        
        <button onclick="startRandomStudent()" class="random-btn">
            <span>üé≤</span> ‡∏™‡∏∏‡πà‡∏°‡∏£‡∏π‡∏õ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
        </button>
    </div>


    <div id="randomModal" class="random-overlay">
        <button class="close-btn" onclick="closeRandomModal()">&times;</button>
        
        <div class="image-container">
            <img id="studentImage" src="s/01.png" alt="Student Image">
        </div>
        
        <div class="status-text" id="statusText">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏∏‡πà‡∏°...</div>
    </div>


    <script>
        // 1. ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (s/01.png ‡∏ñ‡∏∂‡∏á s/13.png)
        const studentImages = [];
        for (let i = 1; i <= 13; i++) {
            // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏•‡∏Ç 1 -> '01', 13 -> '13'
            let num = i.toString().padStart(2, '0'); 
            studentImages.push(`s/${num}.png`);
        }

        let intervalId = null;
        let timeoutIds = []; // ‡πÄ‡∏Å‡πá‡∏ö timeout ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏¥‡∏î
        const imgElement = document.getElementById('studentImage');
        const modal = document.getElementById('randomModal');
        const statusText = document.getElementById('statusText');

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏∏‡πà‡∏°
        function startRandomStudent() {
            // ‡πÄ‡∏õ‡∏¥‡∏î Modal
            modal.style.display = 'flex';
            statusText.innerText = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏∏‡πà‡∏°‡∏ú‡∏π‡πâ‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ...";
            statusText.style.opacity = 1;

            // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏Å‡πà‡∏≤
            clearAllTimers();

            // === PHASE 1: ‡∏™‡∏∏‡πà‡∏°‡∏£‡∏±‡∏ß‡πÜ ‡πÄ‡∏£‡πá‡∏ß‡πÜ (10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ) ===
            const startTime = Date.now();
            
            intervalId = setInterval(() => {
                showRandomImage();

                // ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏ß‡∏•‡∏≤‡∏ß‡πà‡∏≤‡∏Ñ‡∏£‡∏ö 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
                if (Date.now() - startTime >= 10000) { // 10000ms = 10s
                    clearInterval(intervalId);
                    startSlowPhase(); // ‡πÑ‡∏õ Phase 2
                }
            }, 50); // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏π‡∏õ‡∏ó‡∏∏‡∏Å 50ms (‡πÄ‡∏£‡πá‡∏ß‡∏°‡∏≤‡∏Å)
        }

        // === PHASE 2: ‡∏™‡∏∏‡πà‡∏°‡∏ï‡πà‡∏≠‡∏≠‡∏µ‡∏Å 4 ‡∏£‡∏π‡∏õ ‡πÉ‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ===
        function startSlowPhase() {
            let count = 0;
            const totalSlowImages = 4; 
            // 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡πÅ‡∏ö‡πà‡∏á‡πÉ‡∏´‡πâ 4 ‡∏£‡∏π‡∏õ = ‡∏£‡∏π‡∏õ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 750ms
            const durationPerImage = 3000 / totalSlowImages; 

            function nextSlowImage() {
                if (count < totalSlowImages) {
                    showRandomImage();
                    
                    // ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Ñ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡∏Å‡πÄ‡∏ö‡∏≤‡πÜ ‡πÉ‡∏™‡πà‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
                    
                    count++;
                    // ‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
                    let tid = setTimeout(nextSlowImage, durationPerImage);
                    timeoutIds.push(tid);
                } else {
                    // === FINISH: ‡∏£‡∏π‡∏õ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Ñ‡πâ‡∏≤‡∏á + ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Ñ ===
                    endSequence();
                }
            }
            
            nextSlowImage();
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
        function endSequence() {
            statusText.innerText = "‡∏ú‡∏π‡πâ‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ‡∏Ñ‡∏∑‡∏≠!";
            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Ñ‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏™‡∏µ
            triggerConfetti();
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏∏‡πà‡∏°‡∏£‡∏π‡∏õ 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏à‡∏≤‡∏Å Array
        function showRandomImage() {
            const randomIndex = Math.floor(Math.random() * studentImages.length);
            imgElement.src = studentImages[randomIndex];
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Ñ‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏™‡∏µ (Confetti)
        function triggerConfetti() {
            var duration = 3 * 1000; // ‡∏ï‡∏Å‡∏ô‡∏≤‡∏ô 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
            var end = Date.now() + duration;

            (function frame() {
                // ‡∏¢‡∏¥‡∏á confetti ‡∏à‡∏≤‡∏Å‡∏ã‡πâ‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Ç‡∏ß‡∏≤
                confetti({
                    particleCount: 5,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 },
                    colors: ['#ff0000', '#00ff00', '#0000ff', '#ffff00']
                });
                confetti({
                    particleCount: 5,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 },
                    colors: ['#ff0000', '#00ff00', '#0000ff', '#ffff00']
                });

                if (Date.now() < end) {
                    requestAnimationFrame(frame);
                }
            }());
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á
        function closeRandomModal() {
            modal.style.display = 'none';
            clearAllTimers();
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡πâ‡∏≤‡∏á Timer ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏Å‡∏±‡∏ô‡∏ö‡∏±‡πä‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏î‡∏õ‡∏¥‡∏î‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏ö)
        function clearAllTimers() {
            if (intervalId) clearInterval(intervalId);
            timeoutIds.forEach(id => clearTimeout(id));
            timeoutIds = [];
        }
    </script>
</body>
</html>
